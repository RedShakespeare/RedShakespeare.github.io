!function(t){function e(r){if(i[r])return i[r].exports;var s=i[r]={exports:{},id:r,loaded:!1};return t[r].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var i={};e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){var r,s;r=i(1),s=function(t){var e,i,s,o;return e=new r(t.width,t.height),0===t.index?e.writeHeader():e.firstFrame=!1,e.setTransparent(t.transparent),e.setRepeat(t.repeat),e.setDelay(t.delay),e.setQuality(t.quality),e.setDither(t.dither),e.setGlobalPalette(t.globalPalette),e.addFrame(t.data),t.last&&e.finish(),!0===t.globalPalette&&(t.globalPalette=e.getGlobalPalette()),s=e.stream(),t.data=s.pages,t.cursor=s.cursor,t.pageSize=s.constructor.pageSize,t.canTransfer?(o=function(){var e,r,s,o;for(o=[],e=0,r=(s=t.data).length;e<r;e++)i=s[e],o.push(i.buffer);return o}(),self.postMessage(t,o)):self.postMessage(t)},self.onmessage=function(t){return s(t.data)}},function(t,e,i){function r(){this.page=-1,this.pages=[],this.newPage()}function s(t,e){this.width=~~t,this.height=~~e,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.image=null,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.neuQuant=null,this.usedEntry=new Array,this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10,this.dither=!1,this.globalPalette=!1,this.out=new r}var o=i(2),n=i(3);r.pageSize=4096,r.charMap={};for(var a=0;a<256;a++)r.charMap[a]=String.fromCharCode(a);r.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(r.pageSize),this.cursor=0},r.prototype.getData=function(){for(var t="",e=0;e<this.pages.length;e++)for(var i=0;i<r.pageSize;i++)t+=r.charMap[this.pages[e][i]];return t},r.prototype.writeByte=function(t){this.cursor>=r.pageSize&&this.newPage(),this.pages[this.page][this.cursor++]=t},r.prototype.writeUTFBytes=function(t){for(var e=t.length,i=0;i<e;i++)this.writeByte(t.charCodeAt(i))},r.prototype.writeBytes=function(t,e,i){for(var r=i||t.length,s=e||0;s<r;s++)this.writeByte(t[s])},s.prototype.setDelay=function(t){this.delay=Math.round(t/10)},s.prototype.setFrameRate=function(t){this.delay=Math.round(100/t)},s.prototype.setDispose=function(t){t>=0&&(this.dispose=t)},s.prototype.setRepeat=function(t){this.repeat=t},s.prototype.setTransparent=function(t){this.transparent=t},s.prototype.addFrame=function(t){this.image=t,this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null,this.getImagePixels(),this.analyzePixels(),!0===this.globalPalette&&(this.globalPalette=this.colorTab),this.firstFrame&&(this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),this.firstFrame||this.globalPalette||this.writePalette(),this.writePixels(),this.firstFrame=!1},s.prototype.finish=function(){this.out.writeByte(59)},s.prototype.setQuality=function(t){t<1&&(t=1),this.sample=t},s.prototype.setDither=function(t){!0===t&&(t="FloydSteinberg"),this.dither=t},s.prototype.setGlobalPalette=function(t){this.globalPalette=t},s.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette},s.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")},s.prototype.analyzePixels=function(){this.colorTab||(this.neuQuant=new o(this.pixels,this.sample),this.neuQuant.buildColormap(),this.colorTab=this.neuQuant.getColormap()),this.dither?this.ditherPixels(this.dither.replace("-serpentine",""),null!==this.dither.match(/-serpentine/)):this.indexPixels(),this.pixels=null,this.colorDepth=8,this.palSize=7,null!==this.transparent&&(this.transIndex=this.findClosest(this.transparent,!0))},s.prototype.indexPixels=function(){var t=this.pixels.length/3;this.indexedPixels=new Uint8Array(t);for(var e=0,i=0;i<t;i++){var r=this.findClosestRGB(255&this.pixels[e++],255&this.pixels[e++],255&this.pixels[e++]);this.usedEntry[r]=!0,this.indexedPixels[i]=r}},s.prototype.ditherPixels=function(t,e){var i={FalseFloydSteinberg:[[3/8,1,0],[3/8,0,1],[.25,1,1]],FloydSteinberg:[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]],Stucki:[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]],Atkinson:[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]]};if(!t||!i[t])throw"Unknown dithering kernel: "+t;var r=i[t],s=0,o=this.height,n=this.width,a=this.pixels,h=e?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var l=0;l<o;l++){e&&(h*=-1);for(var u=1==h?0:n-1,p=1==h?n:0;u!==p;u+=h){var f=3*(s=l*n+u),c=a[f],y=a[f+1],w=a[f+2];f=this.findClosestRGB(c,y,w),this.usedEntry[f]=!0,this.indexedPixels[s]=f,f*=3;for(var d=c-this.colorTab[f],g=y-this.colorTab[f+1],x=w-this.colorTab[f+2],b=1==h?0:r.length-1,v=1==h?r.length:0;b!==v;b+=h){var P=r[b][1],m=r[b][2];if(P+u>=0&&P+u<n&&m+l>=0&&m+l<o){var B=r[b][0];f=s+P+m*n,a[f*=3]=Math.max(0,Math.min(255,a[f]+d*B)),a[f+1]=Math.max(0,Math.min(255,a[f+1]+g*B)),a[f+2]=Math.max(0,Math.min(255,a[f+2]+x*B))}}}}},s.prototype.findClosest=function(t,e){return this.findClosestRGB((16711680&t)>>16,(65280&t)>>8,255&t,e)},s.prototype.findClosestRGB=function(t,e,i,r){if(null===this.colorTab)return-1;if(this.neuQuant&&!r)return this.neuQuant.lookupRGB(t,e,i);for(var s=0,o=16777216,n=this.colorTab.length,a=0,h=0;a<n;h++){var l=t-(255&this.colorTab[a++]),u=e-(255&this.colorTab[a++]),p=i-(255&this.colorTab[a++]),f=l*l+u*u+p*p;(!r||this.usedEntry[h])&&f<o&&(o=f,s=h)}return s},s.prototype.getImagePixels=function(){var t=this.width,e=this.height;this.pixels=new Uint8Array(t*e*3);for(var i=this.image,r=0,s=0,o=0;o<e;o++)for(var n=0;n<t;n++)this.pixels[s++]=i[r++],this.pixels[s++]=i[r++],this.pixels[s++]=i[r++],r++},s.prototype.writeGraphicCtrlExt=function(){var t,e;this.out.writeByte(33),this.out.writeByte(249),this.out.writeByte(4),null===this.transparent?(t=0,e=0):(t=1,e=2),this.dispose>=0&&(e=7&dispose),e<<=2,this.out.writeByte(0|e|t),this.writeShort(this.delay),this.out.writeByte(this.transIndex),this.out.writeByte(0)},s.prototype.writeImageDesc=function(){this.out.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame||this.globalPalette?this.out.writeByte(0):this.out.writeByte(128|this.palSize)},s.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(240|this.palSize),this.out.writeByte(0),this.out.writeByte(0)},s.prototype.writeNetscapeExt=function(){this.out.writeByte(33),this.out.writeByte(255),this.out.writeByte(11),this.out.writeUTFBytes("NETSCAPE2.0"),this.out.writeByte(3),this.out.writeByte(1),this.writeShort(this.repeat),this.out.writeByte(0)},s.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);for(var t=768-this.colorTab.length,e=0;e<t;e++)this.out.writeByte(0)},s.prototype.writeShort=function(t){this.out.writeByte(255&t),this.out.writeByte(t>>8&255)},s.prototype.writePixels=function(){new n(this.width,this.height,this.indexedPixels,this.colorDepth).encode(this.out)},s.prototype.stream=function(){return this.out},t.exports=s},function(t,e){var i=256,r=1024,s=1<<18;t.exports=function(t,e){function o(t,e,i,s,o){h[e][0]-=t*(h[e][0]-i)/r,h[e][1]-=t*(h[e][1]-s)/r,h[e][2]-=t*(h[e][2]-o)/r}function n(t,e,r,o,n){for(var a,l,u=Math.abs(e-t),p=Math.min(e+t,i),c=e+1,y=e-1,w=1;c<p||y>u;)l=f[w++],c<p&&((a=h[c++])[0]-=l*(a[0]-r)/s,a[1]-=l*(a[1]-o)/s,a[2]-=l*(a[2]-n)/s),y>u&&((a=h[y--])[0]-=l*(a[0]-r)/s,a[1]-=l*(a[1]-o)/s,a[2]-=l*(a[2]-n)/s)}function a(t,e,r){t|=0,e|=0,r|=0;var s,o,n,a,l,f=~(1<<31),c=f,y=-1,w=y;for(s=0;s<i;s++)o=h[s],(n=Math.abs((0|o[0])-t)+Math.abs((0|o[1])-e)+Math.abs((0|o[2])-r)|0)<f&&(f=n,y=s),(a=n-((0|u[s])>>12))<c&&(c=a,w=s),l=p[s]>>10,p[s]-=l,u[s]+=l<<10;return p[y]+=64,u[y]-=65536,w}var h,l,u,p,f;this.buildColormap=function(){(function(){var t,e;for(h=[],l=new Int32Array(256),u=new Int32Array(i),p=new Int32Array(i),f=new Int32Array(32),t=0;t<i;t++)e=(t<<12)/i,h[t]=new Float64Array([e,e,e,0]),p[t]=256,u[t]=0})(),function(){var i,s,h=t.length,l=30+(e-1)/3,u=h/(3*e),p=~~(u/100),c=r,y=2048,w=y>>6;for(w<=1&&(w=0),i=0;i<w;i++)f[i]=c*(256*(w*w-i*i)/(w*w));h<1509?(e=1,s=3):s=h%499!=0?1497:h%491!=0?1473:h%487!=0?1461:1509;var d,g,x,b,v=0;for(i=0;i<u;)if(o(c,b=a(d=(255&t[v])<<4,g=(255&t[v+1])<<4,x=(255&t[v+2])<<4),d,g,x),0!==w&&n(w,b,d,g,x),(v+=s)>=h&&(v-=h),0===p&&(p=1),++i%p==0)for(c-=c/l,(w=(y-=y/30)>>6)<=1&&(w=0),b=0;b<w;b++)f[b]=c*(256*(w*w-b*b)/(w*w))}(),function(){for(var t=0;t<i;t++)h[t][0]>>=4,h[t][1]>>=4,h[t][2]>>=4,h[t][3]=t}(),function(){var t,e,r,s,o,n,a=0,u=0;for(t=0;t<i;t++){for(o=t,n=(r=h[t])[1],e=t+1;e<i;e++)(s=h[e])[1]<n&&(o=e,n=s[1]);if(s=h[o],t!=o&&(e=s[0],s[0]=r[0],r[0]=e,e=s[1],s[1]=r[1],r[1]=e,e=s[2],s[2]=r[2],r[2]=e,e=s[3],s[3]=r[3],r[3]=e),n!=a){for(l[a]=u+t>>1,e=a+1;e<n;e++)l[e]=t;a=n,u=t}}for(l[a]=u+255>>1,e=a+1;e<256;e++)l[e]=255}()},this.getColormap=function(){for(var t=[],e=[],r=0;r<i;r++)e[h[r][3]]=r;for(var s=0,o=0;o<i;o++){var n=e[o];t[s++]=h[n][0],t[s++]=h[n][1],t[s++]=h[n][2]}return t},this.lookupRGB=function(t,e,r){t|=0,r|=0;for(var s,o,n,a=1e3,u=-1,p=0|l[e|=0],f=p-1;p<i||f>=0;)p<i&&((n=(0|(o=h[p])[1])-e)>=a?p=i:(p++,n<0&&(n=-n),(s=(0|o[0])-t)<0&&(s=-s),(n+=s)<a&&((s=(0|o[2])-r)<0&&(s=-s),(n+=s)<a&&(a=n,u=0|o[3])))),f>=0&&((n=e-(0|(o=h[f])[1]))>=a?f=-1:(f--,n<0&&(n=-n),(s=(0|o[0])-t)<0&&(s=-s),(n+=s)<a&&((s=(0|o[2])-r)<0&&(s=-s),(n+=s)<a&&(a=n,u=0|o[3]))));return u}}},function(t,e){var i=5003,r=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];t.exports=function(t,e,s,o){function n(t,e){v[y++]=t,y>=254&&l(e)}function a(t){h(i),S=g+2,T=!0,f(g,t)}function h(t){for(var e=0;e<t;++e)P[e]=-1}function l(t){y>0&&(t.writeByte(y),t.writeBytes(v,0,y),y=0)}function u(t){return(1<<t)-1}function p(){return 0===remaining?-1:(--remaining,255&s[curPixel++])}function f(t,e){for(c&=r[B],B>0?c|=t<<B:c=t,B+=n_bits;B>=8;)n(255&c,e),c>>=8,B-=8;if((S>w||T)&&(T?(w=u(n_bits=d),T=!1):(++n_bits,w=12==n_bits?4096:u(n_bits))),t==x){for(;B>0;)n(255&c,e),c>>=8,B-=8;l(e)}}var c,y,w,d,g,x,b=Math.max(2,o),v=new Uint8Array(256),P=new Int32Array(i),m=new Int32Array(i),B=0,S=0,T=!1;this.encode=function(r){r.writeByte(b),remaining=t*e,curPixel=0,function(t,e){var r,s,o,n,l,c;for(d=t,T=!1,n_bits=d,w=u(n_bits),x=1+(g=1<<t-1),S=g+2,y=0,n=p(),c=0,r=i;r<65536;r*=2)++c;c=8-c,h(i),f(g,e);t:for(;-1!=(s=p());)if(r=(s<<12)+n,o=s<<c^n,P[o]!==r){if(P[o]>=0){l=5003-o,0===o&&(l=1);do{if((o-=l)<0&&(o+=5003),P[o]===r){n=m[o];continue t}}while(P[o]>=0)}f(n,e),n=s,S<4096?(m[o]=S++,P[o]=r):a(e)}else n=m[o];f(n,e),f(x,e)}(b+1,r),r.writeByte(0)}}}]);